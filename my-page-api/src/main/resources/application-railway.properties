# Railway deployment configuration
# All secrets are loaded from Railway environment variables

# Disable GCP-specific features
spring.cloud.gcp.sql.enabled=false
spring.cloud.gcp.config.enabled=false
spring.cloud.gcp.core.enabled=false
spring.cloud.gcp.storage.enabled=false
spring.cloud.gcp.secretmanager.enabled=false

# PostgreSQL database
# Set JDBC_DATABASE_URL in Railway: jdbc:postgresql://host:port/db?user=USER&password=PASS
# Also set DB_USERNAME and DB_PASSWORD
spring.datasource.url=${JDBC_DATABASE_URL}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Liquibase - explicitly use the same datasource (not the auto-detected DATABASE_URL)
spring.liquibase.url=${JDBC_DATABASE_URL}
spring.liquibase.user=${DB_USERNAME:postgres}
spring.liquibase.password=${DB_PASSWORD}
spring.liquibase.driver-class-name=org.postgresql.Driver

# JPA settings
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.globally_quoted_identifiers=true

# Liquibase
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:/db/changelog/db.changelog-root.yaml

# OAuth2 / JWT
spring.security.oauth2.resourceserver.jwt.issuer-uri=https://accounts.google.com

# Google Client ID (set in Railway environment variables)
google.clientid=${GOOGLE_CLIENT_ID}

# Slack channels (set in Railway environment variables)
slack.hyttekanal.id=${SLACK_HYTTEKANAL_ID:NOT_SET}
slack.utlysning.channel=${SLACK_UTLYSNING_CHANNEL:NOT_SET}
slack.salgstavle.id=${SLACK_SALGSTAVLE_ID:NOT_SET}

# Flowcase (CVPartner) API
flowcase.apiKey=${FLOWCASE_API_KEY:NOT_SET}
flowcase.subdomain=jpro

# File storage bucket (for future S3/R2 integration)
gcs.jobpostings.bucket.name=${STORAGE_BUCKET:NOT_SET}

# Notification jobs
notification.jobs.enabled=${NOTIFICATION_JOB_ENABLED:true}

# Server port (Railway sets PORT automatically)
server.port=${PORT:8080}
